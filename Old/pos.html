<html>
        <script src="/socket.io/socket.io.js"></script>

    <script>

        var socket = io();

        function loaded(){
            // setInterval(()=>{
            //     getLoc()
            // },500)
            getLoc();
            socket.emit("start")
        }

        function getLoc(){
            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(sendPos, posError)
            }
        }

        function posError(e){
            socket.emit("error",e)
        }

        function sendPos(pos){
            var o = {
                lat:pos.coords.latitude,
                lon:pos.coords.longitude
            }

            socket.emit("loc",o)
        }

    </script>
<body onload="loaded()">

</body>
</html>